# PRD 기반 작업 목록 생성 규칙

## 목표
기존 제품 요구사항 문서(PRD)를 기반으로 개발자가 구현에 사용할 수 있는 상세하고 단계별 작업 목록을 마크다운 형식으로 생성합니다.

---

## 출력 설정

### 파일 정보
- **형식**: 마크다운 (`.md`)
- **위치**: `/tasks/`
- **파일명**: `tasks-[prd-파일명].md`
  - 예: PRD 파일이 `prd-user-profile.md`인 경우 → `tasks-prd-user-profile.md`

---

## 작업 목록 생성 프로세스

### 1. PRD 참조 받기
사용자가 AI에게 특정 PRD 파일을 지정합니다.

### 2. PRD 분석
지정된 PRD의 기능 요구사항, 사용자 스토리 및 기타 섹션을 읽고 분석합니다.

### 3. Phase 1: 상위 작업 생성
- PRD 분석 기반으로 주요 상위 레벨 작업 생성
- **권장 개수**: 3-5개의 상위 작업
- **중요**: 각 상위 작업은 **Git Push 단위**로 구성
  - 상위 작업 완료 시 Push가 수행되므로, 배포 가능한 단위로 구성
  - 독립적으로 기능하거나 의미 있는 진행 상태를 나타내야 함
- 하위 작업 없이 상위 작업만 먼저 제시
- 사용자에게 다음 메시지 전달:
  > "PRD를 기반으로 상위 레벨 작업을 생성했습니다. 하위 작업을 생성할 준비가 되었나요? 진행하려면 'Go'로 응답해주세요."

### 4. 확인 대기
사용자가 "Go"로 응답할 때까지 일시 중지하고 대기합니다.

### 5. Phase 2: 하위 작업 생성
사용자 확인 후 각 상위 작업을 실행 가능한 하위 작업으로 분해합니다.

#### 하위 작업 생성 원칙
- **커밋 단위 기준**: 각 하위 작업은 **하나의 Git 커밋**으로 작성할 수 있는 양으로 구성
- 상위 작업에서 논리적으로 이어지도록 구성
- PRD의 구현 세부사항을 반영

#### 작업량이 많은 경우
- 하나의 커밋으로 처리하기 어려운 경우
- **하위의 하위 작업(3단계 깊이)**으로 추가 분해
- 예: `1.1.1`, `1.1.2`, `1.1.3` 형식 사용

### 6. 테스트 작업 추가
**모든 하위 작업마다 자동으로 테스트 관련 하위의 하위 작업 생성:**
- `[번호].1` 테스트 코드 작성
- `[번호].2` 테스트 실행 및 검증
- `[번호].3` 오류 수정 (필요 시)

### 7. 관련 파일 식별
- 작업과 PRD를 기반으로 생성/수정할 파일 식별
- 각 파일의 목적에 대한 간단한 설명 작성
- `관련 파일` 섹션에 나열

### 8. 최종 출력 생성
상위 작업, 하위 작업, 관련 파일을 최종 마크다운 구조로 결합합니다.

### 9. 파일 저장
생성된 문서를 `/tasks/` 디렉토리에 저장합니다.

---

## 출력 형식

생성된 작업 목록은 반드시 다음 구조를 따라야 합니다:

```markdown
### 관련 파일
- `path/to/component.tsx` - 이 기능의 주요 컴포넌트
- `path/to/api.ts` - 데이터 처리를 위한 API 핸들러
- `lib/utils/helpers.ts` - 유틸리티 함수 모음
- `tests/component.test.tsx` - 컴포넌트 테스트 파일

## 작업
- [ ] 1.0 상위 작업 제목 (Push 단위)
    - [ ] 1.1 하위 작업 설명 (커밋 단위)
        - [ ] 1.1.1 테스트 코드 작성
        - [ ] 1.1.2 테스트 실행 및 검증
        - [ ] 1.1.3 오류 수정 (필요 시)
    - [ ] 1.2 하위 작업 설명 (커밋 단위)
        - [ ] 1.2.1 테스트 코드 작성
        - [ ] 1.2.2 테스트 실행 및 검증
        - [ ] 1.2.3 오류 수정 (필요 시)
        
- [ ] 2.0 상위 작업 제목 (Push 단위)
    - [ ] 2.1 복잡한 하위 작업 (작업량이 많은 경우)
        - [ ] 2.1.1 세부 구현 작업 1 (커밋 단위)
            - [ ] 2.1.1.1 테스트 코드 작성
            - [ ] 2.1.1.2 테스트 실행 및 검증
            - [ ] 2.1.1.3 오류 수정 (필요 시)
        - [ ] 2.1.2 세부 구현 작업 2 (커밋 단위)
            - [ ] 2.1.2.1 테스트 코드 작성
            - [ ] 2.1.2.2 테스트 실행 및 검증
            - [ ] 2.1.2.3 오류 수정 (필요 시)
    - [ ] 2.2 하위 작업 설명 (커밋 단위)
        - [ ] 2.2.1 테스트 코드 작성
        - [ ] 2.2.2 테스트 실행 및 검증
        - [ ] 2.2.3 오류 수정 (필요 시)
        
- [ ] 3.0 단순한 상위 작업 제목 (Push 단위, 하위 작업이 없을 수 있음)
```

---

## 작업 구조 규칙

### 계층 구조
1. **상위 작업 (1.0, 2.0, 3.0) - Git Push 단위**
   - 기능의 주요 영역을 나타냄
   - **상위 작업 완료 시 Git Push 수행**
   - 배포 가능하거나 의미 있는 진행 단계를 나타내는 단위로 구성
   - 독립적으로 동작 가능한 기능 단위
   
2. **하위 작업 (1.1, 1.2, 2.1) - Git Commit 단위**
   - **하나의 Git 커밋으로 완료 가능한 작업 단위**
   - 독립적으로 실행 및 검증 가능
   
3. **하위의 하위 작업 (1.1.1, 2.1.1)**
   - 하위 작업이 커밋 단위로 너무 큰 경우 사용
   - 각각이 하나의 커밋 단위가 되도록 분해
   - 테스트 관련 작업 포함

### 상위 작업 구성 기준 (Push 단위)
각 상위 작업은 다음 기준으로 구성:
- **기능적 완결성**: 해당 상위 작업만으로 독립적인 기능을 제공
- **배포 가능성**: Push 후 배포해도 문제없는 상태
- **의미 있는 단위**: 진행 상황을 명확하게 보여주는 단계
- **적절한 범위**: 너무 크지도 작지도 않은 범위 (3-7개의 하위 작업 권장)

### 상위 작업 분리 예시
❌ **잘못된 예** (너무 큰 단위):
```markdown
- [ ] 1.0 사용자 관리 시스템 구현 (Push 단위)
    - [ ] 1.1 사용자 등록
    - [ ] 1.2 사용자 로그인
    - [ ] 1.3 사용자 프로필
    - [ ] 1.4 권한 관리
    - [ ] 1.5 사용자 검색
    - [ ] 1.6 사용자 삭제
```

✅ **올바른 예** (적절한 Push 단위):
```markdown
- [ ] 1.0 사용자 인증 기능 구현 (Push 단위)
    - [ ] 1.1 사용자 등록
    - [ ] 1.2 사용자 로그인
    - [ ] 1.3 로그아웃 처리

- [ ] 2.0 사용자 프로필 관리 (Push 단위)
    - [ ] 2.1 프로필 조회
    - [ ] 2.2 프로필 수정
    - [ ] 2.3 프로필 이미지 업로드

- [ ] 3.0 사용자 권한 관리 (Push 단위)
    - [ ] 3.1 권한 체계 구현
    - [ ] 3.2 권한 검증 미들웨어
    - [ ] 3.3 관리자 페이지
```

### 커밋 단위 판단 기준 (하위 작업)
다음 중 하나라도 해당하면 하위의 하위 작업으로 분해:
- 파일 수정이 5개 이상 필요한 경우
- 구현 예상 시간이 2시간 이상인 경우
- 독립적으로 테스트 가능한 여러 기능이 포함된 경우
- 로직이 복잡하여 단계별 구현이 필요한 경우

### 테스트 작업 규칙
- **모든 구현 하위 작업**에 자동으로 테스트 작업 추가
- 테스트 작업은 항상 하위의 하위 레벨에 생성
- 구조:
  - `.1` 테스트 코드 작성
  - `.2` 테스트 실행 및 검증
  - `.3` 오류 수정 (필요 시 - 조건부 작업)

---

## 상호작용 모델

이 프로세스는 2단계 확인 방식을 사용합니다:

1. **Phase 1 완료 후**: 상위 작업만 제시하고 사용자 확인 대기
2. **"Go" 응답 후**: 하위 작업 및 테스트 작업 생성

이는 세부사항 작업 전에 상위 레벨 계획이 사용자 기대와 일치하는지 확인하기 위함입니다.

---

## Git 작업 흐름

```
하위 작업 완료 → Git Commit → 다음 하위 작업
    ↓ (모든 하위 작업 완료)
상위 작업 완료 → Git Push → 다음 상위 작업
```

### 중요 원칙
- **하위 작업 완료** = 1 Commit
- **상위 작업 완료** = 1 Push (여러 Commit 포함)
- 상위 작업은 Push해도 안전한 단위로 구성

---

## 대상 독자

작업 목록의 주요 독자는 **기능을 구현할 개발자**입니다.

- 개발자가 즉시 작업을 시작할 수 있도록 명확하고 구체적으로 작성
- 기술적 용어 사용 가능
- 각 작업의 범위와 완료 조건이 명확해야 함

---

## AI 실행 체크리스트

작업 목록 생성 시 다음을 확인:

- [ ] PRD의 모든 기능 요구사항이 작업으로 변환됨
- [ ] 각 상위 작업이 Push 단위로 적절하게 구성됨 (배포 가능한 단위)
- [ ] 각 하위 작업이 하나의 커밋 단위로 적절함
- [ ] 복잡한 작업은 하위의 하위로 분해됨
- [ ] 모든 구현 작업에 테스트 작업이 포함됨
- [ ] 관련 파일 목록이 정확하고 설명이 명확함
- [ ] 작업 번호 체계가 일관됨
- [ ] 파일명이 규칙에 맞게 생성됨 (`Tasks_[yymmdd].md`)
- [ ] 상위 작업 간 의존성이 최소화되어 있음